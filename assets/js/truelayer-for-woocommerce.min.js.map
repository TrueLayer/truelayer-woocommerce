{"version":3,"file":"truelayer-for-woocommerce.min.js","mappings":"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","sources":["webpack://truelayer-for-woocommerce/./node_modules/truelayer-embedded-payment-page/dist/index.js","webpack://truelayer-for-woocommerce/./assets/js/truelayer-for-woocommerce.js"],"sourcesContent":["class e{constructor(e,t,n){this.getIframe=()=>this.iframe||this.createIframe(),this.createIframe=()=>(this.iframe=document.createElement(\"iframe\"),this.iframe.src=this.getUrl(),this.iframe.title=\"Hosted payment page - EPP\",this.iframe.style.border=\"none\",this.iframe.style.boxSizing=\"border-box\",this.iframe.style.width=\"100%\",this.iframe.style.height=\"100%\",this.iframe.style.minWidth=this.environment.minWidth,this.iframe.style.minHeight=this.environment.minHeight,this.logger.log(\"created HPP iframe:\",this.iframe.src),this.iframe),this.attachIframe=e=>{e.appendChild(this.getIframe()),this.logger.log(\"attached HPP iframe to:\",e)},this.getUrl=()=>{var e;let t=this.environment.hppUrl;if(t+=\"mandate\"===this.config.type?\"/mandates\":\"/payments\",t+=this.environment.mock?\"-mock\":\"\",this.config.language){if(this.config.language.length>2)throw new Error(\"Language passed in the wrong format. Accepted ISO 2 Letter Language Codes\");t+=`?lng=${this.config.language}&`}return t+=\"#\",t+=`web-sdk=${this.environment.version}`,t+=`&signup=${null!=(e=this.config.signup)&&e}`,t+=`&open_bank_in_new_tab=${!0===this.config.open_bank_in_new_tab}`,t+=\"mandate\"===this.config.type?`&mandate_id=${this.config.mandate_id}`:`&payment_id=${this.config.payment_id}`,t+=`&resource_token=${this.config.resource_token}`,t+=`&return_uri=${this.config.return_uri}`,t},this.setConfig=e=>{if(\"payment\"===e.type&&!e.payment_id)throw new Error(\"payment_id is required\");if(\"mandate\"===e.type&&!e.mandate_id)throw new Error(\"mandate_id is required\");if(!e.resource_token)throw new Error(\"resource_token is required\");if(!e.return_uri)throw new Error(\"return_uri is required\");this.config=e},this.setConfig(t),this.environment=e,this.logger=n}}const t=\"641px\",n=\"786px\",i=\"304px\",o=\"304px\";class r{constructor(e,i){this.createModalElement=()=>{const e=document.createElement(\"div\");return e.id=\"truelayer-modal\",e.style.cssText=\"\\n      box-sizing: border-box;\\n      position: fixed;\\n      display: flex;\\n      z-index: 9999;\\n      left: 0;\\n      top: 0;\\n      width: 100%;\\n      height: 100%;\\n      overflow: hidden;\\n      margin: auto;\\n      background-color: rgb(0,0,0);\\n      background-color: rgba(0,0,0,0.6);\\n      opacity: 0;\\n      transition: all 0.5s ease-in;\\n    \",e},this.createModalContentElement=()=>{const e=document.createElement(\"div\");return e.id=\"truelayer-modal-content\",e.style.cssText=`\\n      box-sizing: border-box;\\n      background-color: white;\\n      border-radius: 5px;\\n      padding: 0;\\n      margin: auto;\\n      border: 0px transparent;\\n      width: ${this.environment.width};\\n      height: ${this.environment.height};\\n      max-height: 97vh;\\n      overflow: hidden;\\n      opacity: 0;\\n      transform: scale(0.8);\\n      transform-origin: center center;\\n      transition: all 0.4s ease-in;\\n      box-shadow: 0 0 0 1px rgb(17 20 24 / 10%), 0 2px 4px rgb(17 20 24 / 20%), 0 8px 24px rgb(17 20 24 / 20%);\\n    `,e},this.mount=()=>(this.logger.log(\"modal appended to the DOM\"),document.body.appendChild(this.modalElement),setTimeout((()=>{this.modalElement.style.opacity=\"1\",this.modalContent.style.opacity=\"1\",this.modalContent.style.transform=\"scale(1)\"}),50),this.setBodyStyle(),this.setModalStyle(),window.addEventListener(\"resize\",this.setModalStyle),this),this.unmount=()=>{this.modalElement.style.transition=\"all 0.2s ease-out\",this.modalElement.style.opacity=\"0\",this.modalContent.style.transition=\"all 0.2s ease-out\",this.modalContent.innerHTML=\"\",this.modalContent.style.opacity=\"0\",this.modalContent.style.transform=\"scale(0.9)\",setTimeout((()=>{this.logger.log(\"modal removed from the DOM\"),this.modalElement.remove(),this.resetBodyStyle()}),200),window.removeEventListener(\"resize\",this.setModalStyle)},this.setModalStyle=()=>{(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=640?(this.modalContent.style.height=\"100%\",this.modalContent.style.width=\"100%\",this.modalContent.style.margin=\"8px\"):(this.modalContent.style.height=n,this.modalContent.style.width=t,this.modalContent.style.margin=\"auto\")},this.setBodyStyle=()=>{document.body.style.overflow=\"hidden\"},this.resetBodyStyle=()=>{document.body.style.overflow=\"auto\"},this.environment=e,this.logger=i,this.modalElement=this.createModalElement(),this.modalContent=this.createModalContentElement(),this.modalElement.appendChild(this.modalContent)}}var s=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function c(e,t,n){!function(e,t,n,i){var o;null==(o=e.contentWindow)||o.postMessage(((e,t)=>{for(var n in t||(t={}))l.call(t,n)&&d(e,n,t[n]);if(a)for(var n of a(t))h.call(t,n)&&d(e,n,t[n]);return e})({type:\"[TRUELAYER]\",message:t,date:Date.now()},n),i)}(e,\"CUSTOM_APPEARANCE\",{appearance:t},n)}const g=\"CLOSE\",m=\"REDIRECT_TO_PROVIDER\",f=\"HPP_READY\",u=\"HPP_DONE\",p=\"HPP_HANDOFF_START\",y=\"HPP_ERROR_DISMISSED\";class w{constructor(e){this.win=null,this.subscribe=()=>{this.iframe.addEventListener(\"load\",this.handleIframeLoad),window.addEventListener(\"message\",this.handleEvent)},this.unsubscribe=()=>{this.iframe.removeEventListener(\"load\",this.handleIframeLoad),window.removeEventListener(\"message\",this.handleEvent)},this.handleIframeLoad=()=>{this.logger.log(\"hosted payment page loaded\"),this.config.onLoad&&(this.logger.log(\"executing onLoad callback\"),this.config.onLoad())},this.handHandoffStart=()=>{this.logger.log(\"hosted payment page start handoff\"),this.config.onHandoffStart&&(this.logger.log(\"executing onHandoffStart callback\"),this.config.onHandoffStart())},this.handleEvent=e=>{const t=e.data;if(e.origin===this.environment.hppUrl)if(e.data)if(\"[TRUELAYER]\"===t.type)try{this.logger.info(\"event received\",t.message,e),this.handleMessage(t)}catch(e){this.logger.error(\"error in message\",e),this.config.onError&&this.config.onError(e)}else this.logger.error(\"data type not equal to [TRUELAYER]\");else this.logger.error(\"unknown data in message\",e);else this.logger.error(\"unknown origin\",e)},this.handleMessage=e=>{var t;switch(e.message){case u:return void this.handleDone();case p:return void this.handHandoffStart();case g:return void this.handleClose();case f:return void this.handleHppReady();case m:const n=this.validateURL(e.provider_uri);return void(n&&(!0===this.config.open_bank_in_new_tab?(this.win=window.open(n,\"_blank\"),null==(t=this.win)||t.focus(),this.config.onOpenBankInNewTab&&this.config.onOpenBankInNewTab()):window.location.href=n));case y:return void this.handleErrorDismiss();default:return void this.logger.log(\"Unknown message type\")}},this.handleClose=()=>{this.cleanUp(),this.config.onAbort&&(this.logger.log(\"executing onAbort callback\"),this.config.onAbort(this.config.target))},this.handleErrorDismiss=()=>{this.cleanUp(),this.config.onErrorDismiss&&(this.logger.log(\"executing onErrorDismiss callback\"),this.config.onErrorDismiss(this.config.target))},this.handleDone=()=>{this.cleanUp(),this.config.onDone&&(this.logger.log(\"executing onDone callback\"),this.config.onDone(this.config.target))},this.handleHppReady=()=>{var e;c(this.iframe,null!=(e=this.config.appearance)?e:{},this.environment.hppUrl)},this.cleanUp=()=>{var e;null==(e=this.win)||e.close(),this.unmount&&this.unmount(),this.unsubscribe(),this.logger.log(\"cleaned up\")},this.validateURL=e=>e.startsWith(\"https\")?e:(this.logger.log(\"uri is not valid\",e),this.config.onError&&this.config.onError(new Error(\"uri is not valid\")),void this.cleanUp()),this.environment=e.environment,this.config=e.config,this.iframe=e.hppClient.getIframe(),this.logger=e.logger,this.unmount=e.unmount}}const b=()=>{};function v(e){return\"undefined\"!=typeof window&&e?{log:E(window.console.log),warn:E(window.console.warn),info:E(window.console.info),error:E(window.console.error)}:{log:b,warn:b,info:b,error:b}}function E(e){const t=\"[SDK]\";return(...n)=>{1===n.length&&\"string\"==typeof n[0]?e(`${t} ${n[0]}`):e(t,...n)}}var _=Object.defineProperty,x=Object.defineProperties,C=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,S=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&S(e,n,t[n]);if(P)for(var n of P(t))k.call(t,n)&&S(e,n,t[n]);return e},D=(e,t)=>x(e,C(t));function H(e){return I(D(L({},e),{type:\"payment\"}))}function R(e){return I(D(L({},e),{type:\"mandate\"}))}function I(s){if(!s)throw new Error(\"config is required\");let a=v(s.debug_mode);return a.log(\"configured with\",s),{start:l=>{const h=L(L({},s),l);a=v(h.debug_mode);try{a.log(\"started with\",h),function(s,a){const l=function(e){const r=e.production?\"https://payment.truelayer.com\":\"https://payment.truelayer-sandbox.com\";if(!r)throw new Error(\"EPP version or HPP url missing\");return{hppUrl:r,version:\"0.2.14\",mock:\"true\"===\"undefined\".toLowerCase(),width:t,height:n,minWidth:i,minHeight:o}}(s);let h,d=s.target;if(!d){const e=new r(l,a);d=e.mount().modalContent,h=e.unmount}const c=new e(l,s,a);c.attachIframe(d);const g=new w({environment:l,config:s,hppClient:c,logger:a,unmount:h});g.subscribe()}(h,a)}catch(e){a.log(\"error\",e),h.onError&&h.onError(e)}}}}export{R as Mandate,H as Payment};\n","import { Payment } from 'truelayer-embedded-payment-page'\r\n\r\n/* global truelayerParams */\r\njQuery(function ($) {\r\n    var truelayerForWooCommerce = {\r\n        init: function () {\r\n            window.addEventListener(\"hashchange\", truelayerForWooCommerce.handleHashChange);\r\n        },\r\n\r\n        handleHashChange: function() {\r\n            const currentHash = location.hash;\r\n\r\n            // If the hash doesn't start with #truelayer, we don't care about it, so bail.\r\n            if (currentHash.indexOf('#truelayer=') !== 0) {\r\n                return;\r\n            }\r\n\r\n            // Remove the #truelayer prefix from the hash.\r\n            const valueWithoutPrefix = decodeURIComponent(currentHash.replace('#truelayer=', ''));\r\n\r\n            // Parse the value into a URL object.\r\n            const url = new URL(valueWithoutPrefix);\r\n\r\n            // Get the payment ID and token from the URL.\r\n            const args = new URLSearchParams(url.search);\r\n            const paymentId = args.get('payment_id');\r\n            const paymentToken = args.get('token');\r\n\r\n            truelayerForWooCommerce.initializeEpp(url.href, paymentId, paymentToken);\r\n        },\r\n\r\n        initializeEpp: function (url, paymentId, paymentToken) {\r\n            const payment = Payment({\r\n                payment_id: paymentId,\r\n                resource_token: paymentToken,\r\n                return_uri: url,\r\n                production: truelayerParams.testmode === 'no',\r\n                onAbort: () => {\r\n                    let redirect = url + '&error=tl_hpp_cancel';\r\n                    window.location.href = redirect;\r\n                },\r\n                onError: error => {\r\n                    let redirect = url + '&error=tl_hpp_error';\r\n                    window.location.href = redirect;\r\n                },\r\n            });\r\n\r\n            payment.start();\r\n        },\r\n    };\r\n\r\n    truelayerForWooCommerce.init();\r\n});\r\n"],"names":["e","constructor","t","n","this","getIframe","iframe","createIframe","document","createElement","src","getUrl","title","style","border","boxSizing","width","height","minWidth","environment","minHeight","logger","log","attachIframe","appendChild","hppUrl","config","type","mock","language","length","Error","version","signup","open_bank_in_new_tab","mandate_id","payment_id","resource_token","return_uri","setConfig","i","o","r","createModalElement","id","cssText","createModalContentElement","mount","body","modalElement","setTimeout","opacity","modalContent","transform","setBodyStyle","setModalStyle","window","addEventListener","unmount","transition","innerHTML","remove","resetBodyStyle","removeEventListener","innerWidth","documentElement","clientWidth","margin","overflow","s","Object","defineProperty","a","getOwnPropertySymbols","l","prototype","hasOwnProperty","h","propertyIsEnumerable","d","enumerable","configurable","writable","value","w","win","subscribe","handleIframeLoad","handleEvent","unsubscribe","onLoad","handHandoffStart","onHandoffStart","data","origin","info","message","handleMessage","error","onError","handleDone","handleClose","handleHppReady","validateURL","provider_uri","open","focus","onOpenBankInNewTab","location","href","handleErrorDismiss","cleanUp","onAbort","target","onErrorDismiss","onDone","contentWindow","postMessage","call","date","Date","now","appearance","c","close","startsWith","hppClient","b","v","E","console","warn","_","x","defineProperties","C","getOwnPropertyDescriptors","P","O","k","S","L","I","debug_mode","start","production","toLowerCase","jQuery","$","truelayerForWooCommerce","init","handleHashChange","currentHash","hash","indexOf","valueWithoutPrefix","decodeURIComponent","replace","url","URL","args","URLSearchParams","search","paymentId","get","paymentToken","initializeEpp","payment","D","Payment","truelayerParams","testmode","redirect"],"sourceRoot":""}