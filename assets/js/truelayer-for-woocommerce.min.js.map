{"version":3,"file":"truelayer-for-woocommerce.min.js","mappings":"AACAA,QAAO,SAAUC,GACb,IAAIC,EAA0B,CAC1BC,UAAW,KAEXC,QAAS,KAETC,KAAM,WAAY,MACdC,OAAOC,iBAAiB,aAAcL,EAAwBM,kBAC9DC,KAAKN,UAAYG,OAAOH,UACxBM,KAAKL,QAAL,UAAeK,KAAKN,iBAApB,aAAe,EAAgBC,OAClC,EAEDI,iBAAkB,WACd,IACIE,EADcC,SAASC,KACIC,MAAM,KACrC,GAAwB,eAApBH,EAAa,GAAqB,CAClC,IAAII,EAAMC,KAAML,EAAa,IACzBM,EAAaD,KAAML,EAAa,IAChCO,EAAgBF,KAAML,EAAa,IACvCR,EAAwBgB,cAAcJ,EAAKE,EAAYC,EAC1D,CACJ,EAEDC,cAAe,SAAUJ,EAAKE,EAAYC,GACtBR,KAAKL,QAAQ,CACzBY,WAAYA,EACZG,eAAgBF,EAChBG,WAAYN,EACZO,WAAYC,gBAAgBD,WAC5BE,eAAgB,WACZ,IAAIC,EAAWC,mBAAmBX,GAAO,eAAiBE,EAC1DV,OAAOK,SAASe,KAAOF,CAC1B,EACDG,QAAS,WACL,IAAIH,EAAWC,mBAAmBX,GAAO,eAAiBE,EAAa,uBACvEV,OAAOK,SAASe,KAAOF,CAC1B,EACDI,QAAS,SAAAC,GACL,IAAIL,EAAWC,mBAAmBX,GAAO,eAAiBE,EAAa,sBACvEV,OAAOK,SAASe,KAAOF,CAC1B,IAGGM,OACX,GAGL5B,EAAwBG,MAC3B","sources":["webpack://truelayer-for-woocommerce/./assets/js/truelayer-for-woocommerce.js"],"sourcesContent":["/* global truelayerParams */\njQuery(function ($) {\n    var truelayerForWooCommerce = {\n        Truelayer: null,\n\n        Payment: null,\n\n        init: function () {\n            window.addEventListener(\"hashchange\", truelayerForWooCommerce.handleHashChange);\n            this.Truelayer = window.Truelayer;\n            this.Payment = this.Truelayer?.Payment;\n        },\n\n        handleHashChange: function() {\n            var currentHash = location.hash;\n            var splittedHash = currentHash.split(\":\");\n            if( splittedHash[0] === \"#truelayer\" ){\n                var url = atob( splittedHash[1] );\n                var payment_id = atob( splittedHash[2] );\n                var payment_token = atob( splittedHash[3] );\n                truelayerForWooCommerce.initializeEpp(url, payment_id, payment_token);\n            }\n        },\n\n        initializeEpp: function( url, payment_id, payment_token ) {\n            const payment = this.Payment({\n                payment_id: payment_id,\n                resource_token: payment_token,\n                return_uri: url,\n                production: truelayerParams.production,\n                onHandoffStart: () => {\n                    let redirect = decodeURIComponent(url) + '?payment_id=' + payment_id;\n                    window.location.href = redirect;\n                },\n                onAbort: () => {\n                    let redirect = decodeURIComponent(url) + '?payment_id=' + payment_id + '&error=tl_hpp_cancel';\n                    window.location.href = redirect;\n                },\n                onError: error => {\n                    let redirect = decodeURIComponent(url) + '?payment_id=' + payment_id + '&error=tl_hpp_error';\n                    window.location.href = redirect;\n                },\n            });\n\n            payment.start();\n        },\n    };\n\n    truelayerForWooCommerce.init();\n});\n\n"],"names":["jQuery","$","truelayerForWooCommerce","Truelayer","Payment","init","window","addEventListener","handleHashChange","this","splittedHash","location","hash","split","url","atob","payment_id","payment_token","initializeEpp","resource_token","return_uri","production","truelayerParams","onHandoffStart","redirect","decodeURIComponent","href","onAbort","onError","error","start"],"sourceRoot":""}